import{r as c,j as e}from"./vendor-Bg-CQKSV.js";import{M as n,B as t,F as p,L as o,I as M,c as F}from"./bootstrap-vendor-HT9O95X4.js";const A=({show:w,onHide:g,savedPrompts:m,onLoadPrompt:N,onDeletePrompt:b,onExportPrompts:C,onImportPrompts:S,onRenamePrompt:P})=>{const[d,T]=c.useState("dateDesc"),[r,u]=c.useState(null),[h,l]=c.useState(""),[x,D]=c.useState(null),I=a=>{D(x===a?null:a)},B=a=>{u(a),l(a.frameworkName)},v=()=>{r&&h.trim()!==""&&(P(r.id,h.trim()),u(null),l(""))},E=()=>{u(null),l("")},R=()=>{const a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=s=>{var f;const i=(f=s.target.files)==null?void 0:f[0];if(i){const y=new FileReader;y.onload=z=>{var k;try{const j=JSON.parse((k=z.target)==null?void 0:k.result);S(j)}catch(j){console.error("Error parsing imported file:",j),alert("Gagal mengimpor prompt. Pastikan file adalah JSON yang valid.")}},y.readAsText(i)}},a.click()},V=[...m].sort((a,s)=>d==="nameAsc"?a.frameworkName.localeCompare(s.frameworkName):d==="dateDesc"?new Date(s.timestamp).getTime()-new Date(a.timestamp).getTime():0);return e.jsxs(n,{show:w,onHide:g,size:"lg",centered:!0,dialogClassName:"modal-themed",children:[e.jsx(n.Header,{closeButton:!0,className:"modal-header-themed",children:e.jsx(n.Title,{children:"📚 Prompt Tersimpan"})}),e.jsxs(n.Body,{className:"modal-body-themed",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("div",{children:[e.jsx(t,{variant:"success",className:"me-2",onClick:()=>C(m),"aria-label":"Ekspor Semua Prompt Tersimpan",children:"📤 Ekspor"}),e.jsx(t,{variant:"info",onClick:R,"aria-label":"Impor Prompt dari File",children:"📥 Impor"})]}),e.jsx(p.Group,{controlId:"sortBySelect",className:"mb-0",children:e.jsxs(p.Select,{size:"sm",value:d,onChange:a=>T(a.target.value),className:"form-select-themed",children:[e.jsx("option",{value:"dateDesc",children:"Urutkan: Terbaru"}),e.jsx("option",{value:"nameAsc",children:"Urutkan: Nama (A-Z)"})]})})]}),m.length===0?e.jsx("p",{className:"text-center",children:"Belum ada prompt yang disimpan."}):e.jsx(o,{className:"saved-prompts-list",children:V.map(a=>e.jsxs(o.Item,{className:"list-group-item-themed",children:[(r==null?void 0:r.id)===a.id?e.jsxs(M,{children:[e.jsx(p.Control,{type:"text",value:h,onChange:s=>l(s.target.value),onKeyPress:s=>s.key==="Enter"&&v(),autoFocus:!0}),e.jsx(t,{variant:"success",onClick:v,children:"Simpan"}),e.jsx(t,{variant:"secondary",onClick:E,children:"Batal"})]}):e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("strong",{children:a.frameworkName}),e.jsx("br",{}),e.jsxs("small",{children:["Disimpan: ","",new Date(a.versions[a.versions.length-1].timestamp).toLocaleString()]})]}),e.jsxs("div",{className:"prompt-actions",children:[e.jsx(t,{variant:"info",size:"sm",className:"me-2",onClick:()=>I(a.id),title:"Lihat Riwayat Versi","aria-label":"Lihat Riwayat Versi",children:x===a.id?"⬆️ Sembunyikan":"⬇️ Riwayat"}),e.jsx(t,{variant:"primary",size:"sm",className:"me-2",onClick:()=>N(a.versions[a.versions.length-1]),title:"Muat Versi Terbaru","aria-label":"Muat Versi Terbaru",children:"📥"}),e.jsx(t,{variant:"warning",size:"sm",className:"me-2",onClick:()=>B(a),title:"Ganti Nama","aria-label":"Ganti Nama Prompt",children:"✏️"}),e.jsx(t,{variant:"danger",size:"sm",onClick:()=>b(a.id),title:"Hapus Prompt","aria-label":"Hapus Prompt",children:"🗑️"})]})]}),e.jsx(F,{in:x===a.id,children:e.jsxs("div",{className:"mt-3 pt-2 border-top",children:[e.jsx("h6",{children:"Riwayat Versi:"}),e.jsx(o,{variant:"flush",children:a.versions.map((s,i)=>e.jsxs(o.Item,{className:"d-flex justify-content-between align-items-center small list-group-item-themed",children:[e.jsxs("span",{children:["Versi ",i+1," -"," ",new Date(s.timestamp).toLocaleString()]}),e.jsx(t,{variant:"outline-primary",size:"sm",onClick:()=>N(s),title:"Muat Versi Ini","aria-label":`Muat Versi ${i+1}`,children:"Muat"})]},i))})]})})]},a.id))})]}),e.jsx(n.Footer,{className:"modal-footer-themed",children:e.jsx(t,{variant:"secondary",onClick:g,children:"Tutup"})})]})};export{A as default};
