import{r as U,j as e,S as na,U as K,V as T,W as la,X as ia,Y as ta,Z as oa,_ as ca,$ as ra,a0 as da,a1 as ma,a2 as pa,a3 as xa,a4 as ha}from"./vendor-CYeAWIBZ.js";import{c as ka}from"./api-BsIbgxsF.js";import{b as R,F as r,O as g,T as j,I as v,B as u,S as M}from"./bootstrap-vendor-CPt9RqHs.js";import"./gemini-vendor-BpRkNtKl.js";const ya=({currentFrameworkDetails:d,selectedFramework:J,formData:c,customInputs:X,dynamicComponentsToRender:_,onModelSelect:ga,selectedModel:B,showDevMode:y,apiKey:A,setApiKey:ja,handleInputChangeWithValidation:x,handleCustomInputChangeWithValidation:Y,validationErrors:s,touchedFields:t})=>{var w;const[h,L]=U.useState({}),[Z,p]=U.useState(null),q=(o,n)=>{console.log(`Toast (${n}): ${o}`),alert(o)},Q=!0,f=(o,n)=>{const a=o,k=n.label||n.description||o,b=n.type,N=n.placeholder,$=n.options,z=n.info,V=n.optional,I=async(l,P,S)=>{var O,H,G;if(console.log("handleAiAssist - API Key Check:",{apiKey:A,isApiKeyEnabled:Q,selectedModel:B}),!A){alert("API Key tidak ditemukan. Harap masukkan API Key di Pengaturan Mode Pengembang.");return}L(m=>({...m,[l]:!0}));const i=d==null?void 0:d.framework,E=(i==null?void 0:i.logika_ai)||"",F=(i==null?void 0:i.perspektif_user)||"",D=((O=i==null?void 0:i.komponen_prompt)==null?void 0:O.PERAN)||"",aa=((H=i==null?void 0:i.komponen_prompt)==null?void 0:H.KONTEKS)||"",ea=((G=i==null?void 0:i.komponen_prompt)==null?void 0:G.TUGAS)||"",sa=`Anda adalah asisten prompt engineering. Tugas Anda adalah membantu pengguna mengisi atau menyempurnakan bagian dari prompt mereka.

Kerangka Kerja Saat Ini:
Nama: ${(i==null?void 0:i.nama_kerangka)||"N/A"}
Deskripsi: ${(i==null?void 0:i.description)||"N/A"}

Komponen yang sedang diisi:
Judul Komponen: "${k}"
Deskripsi Variabel: "${S.description}"
Contoh/Placeholder: "${N||"N/A"}"

Ini adalah bagian dari kerangka kerja prompt dengan:
PERAN: ${D}
KONTEKS: ${aa}
TUGAS: ${ea}

Logika AI untuk kerangka kerja ini adalah: "${E}"
Perspektif pengguna untuk kerangka kerja ini adalah: "${F}"

Teks saat ini di bidang ini adalah: "${P}".

Instruksi:
- Fokuskan respons Anda secara strikt pada variabel "${S.description}" dan judul komponen "${k}" dalam konteks kerangka kerja ini.
- Jika teks saat ini kosong, hasilkan teks yang relevan dan sesuai dengan deskripsi variabel, judul komponen, dan konteks kerangka kerja.
- Jika teks saat ini tidak kosong, perbaiki, perluas, atau sempurnakan teks ini agar lebih baik, lebih lengkap, dan sesuai dengan deskripsi variabel, judul komponen, dan konteks kerangka kerja.
- Berikan hanya teks yang disarankan, tanpa penjelasan tambahan atau pembuka/penutup.
- Pastikan output Anda langsung dapat digunakan sebagai nilai untuk bidang input ini.
`;try{const m=await ka(A,sa,B);x(l,m,S)}catch(m){console.error("AI Assist Error:",m),q(`Gagal mendapatkan bantuan AI untuk ${k}. Error: ${m instanceof Error?m.message:String(m)}`,"error")}finally{L(m=>({...m,[l]:!1}))}},C=(l,P)=>{x(l,"",P)};if(!a)return null;const W=l=>{switch(l){case"text":case"textarea":return e.jsx(ha,{className:"me-2"});case"number":return e.jsx(xa,{className:"me-2"});case"date":case"datetime":return e.jsx(pa,{className:"me-2"});case"color":return e.jsx(ma,{className:"me-2"});case"select":case"multiselect":return e.jsx(da,{className:"me-2"});case"boolean":return e.jsx(ra,{className:"me-2"});case"code":return e.jsx(ca,{className:"me-2"});case"slider":return e.jsx(oa,{className:"me-2"});case"negative_prompt":return e.jsx(ta,{className:"me-2"});case"image":return e.jsx(ia,{className:"me-2"});case"file":return e.jsx(la,{className:"me-2"});default:return null}};return e.jsxs(r.Group,{className:"mb-3",controlId:a,children:[e.jsxs(r.Label,{className:"small mb-1 d-flex align-items-center",children:[W(b),k,z&&e.jsx(g,{placement:"top",overlay:e.jsx(j,{id:`tooltip-${a}`,children:z}),children:e.jsx(na,{className:"ms-2",style:{cursor:"help"}})}),V&&e.jsx(g,{placement:"top",overlay:e.jsx(j,{id:`tooltip-optional-${a}`,children:"Bidang ini bersifat opsional dan dapat dibiarkan kosong."}),children:e.jsx("span",{className:"ms-1",style:{cursor:"help"},children:"(Opsional)"})})]}),b==="textarea"&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs(v,{className:"flex-grow-1",children:[e.jsx(g,{placement:"right",overlay:e.jsx(j,{id:`tooltip-error-${a}`,children:s[a]}),show:t[a]&&!!s[a],children:e.jsx(r.Control,{as:"textarea",name:a,placeholder:N,value:c[a]||"",onChange:l=>x(a,l.target.value,n),onMouseEnter:()=>p(a),onMouseLeave:()=>p(null),rows:Math.max(3,(c[a]||"").split(`
`).length+1),isInvalid:t[a]&&!!s[a],"aria-invalid":t[a]&&s[a]?"true":"false","aria-describedby":t[a]&&s[a]?`validation-feedback-${a}`:void 0})}),c[a]&&e.jsx(u,{variant:"outline-secondary",onClick:()=>C(a,n),title:"Hapus Input",children:e.jsx(K,{})}),e.jsx(r.Control.Feedback,{type:"invalid",id:`validation-feedback-${a}`,children:s[a]})]}),y&&e.jsx(u,{variant:"outline-secondary",onClick:()=>I(a,c[a]||"",n),disabled:h[a],title:"AI Assist",className:"ms-2",children:h[a]?e.jsx(M,{as:"span",animation:"border",size:"sm"}):e.jsx(T,{})})]}),b==="negative_prompt"&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs(v,{className:"flex-grow-1",children:[e.jsx(r.Control,{as:"textarea",name:a,placeholder:N||"Masukkan hal-hal yang ingin dihindari...",value:c[a]||"",onChange:l=>x(a,l.target.value,n),onMouseEnter:()=>p(a),onMouseLeave:()=>p(null),rows:Math.max(2,(c[a]||"").split(`
`).length+1),isInvalid:t[a]&&!!s[a],"aria-invalid":t[a]&&s[a]?"true":"false","aria-describedby":t[a]&&s[a]?`validation-feedback-${a}`:void 0}),c[a]&&e.jsx(u,{variant:"outline-secondary",onClick:()=>C(a,n),title:"Hapus Input",children:e.jsx(K,{})}),e.jsx(r.Control.Feedback,{type:"invalid",id:`validation-feedback-${a}`,children:s[a]})]}),y&&e.jsx(u,{variant:"outline-secondary",onClick:()=>I(a,c[a]||"",n),disabled:h[a],title:"AI Assist",className:"ms-2",children:h[a]?e.jsx(M,{as:"span",animation:"border",size:"sm"}):e.jsx(T,{})})]}),b==="text"&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs(v,{className:"flex-grow-1",children:[e.jsx(g,{placement:"right",overlay:e.jsx(j,{id:`tooltip-error-${a}`,children:s[a]}),show:t[a]&&!!s[a],children:e.jsx(r.Control,{type:"text",name:a,placeholder:N,value:c[a]||"",onChange:l=>x(a,l.target.value,n),onMouseEnter:()=>p(a),onMouseLeave:()=>p(null),isInvalid:t[a]&&!!s[a],"aria-invalid":t[a]&&s[a]?"true":"false","aria-describedby":t[a]&&s[a]?`validation-feedback-${a}`:void 0})}),c[a]&&e.jsx(u,{variant:"outline-secondary",onClick:()=>C(a,n),title:"Hapus Input",children:e.jsx(K,{})}),e.jsx(r.Control.Feedback,{type:"invalid",id:`validation-feedback-${a}`,children:s[a]})]}),y&&e.jsx(u,{variant:"outline-secondary",onClick:()=>I(a,c[a]||"",n),disabled:h[a],title:"AI Assist",className:"ms-2",children:h[a]?e.jsx(M,{as:"span",animation:"border",size:"sm"}):e.jsx(T,{})})]}),b==="select"&&e.jsx("div",{className:"w-100",children:e.jsx(g,{placement:"right",overlay:e.jsx(j,{id:`tooltip-error-${a}`,children:s[a]}),show:t[a]&&!!s[a]||Z===a&&!!s[a],children:e.jsxs(e.Fragment,{children:[e.jsxs(v,{children:[e.jsx(r.Select,{name:a,value:c[a]||"",onChange:l=>x(a,l.target.value,n),onMouseEnter:()=>p(a),onMouseLeave:()=>p(null),className:"form-select",isInvalid:t[a]&&!!s[a],"aria-invalid":t[a]&&s[a]?"true":"false","aria-describedby":t[a]&&s[a]?`validation-feedback-${a}`:void 0,children:$==null?void 0:$.map(l=>e.jsx("option",{value:l,children:l},l))}),e.jsx(r.Control.Feedback,{type:"invalid",id:`validation-feedback-${a}`,children:s[a]}),c[a]==="Lainnya..."&&e.jsx(g,{placement:"right",overlay:e.jsx(j,{id:`tooltip-error-${a}-custom`,children:s[a]}),show:t[a]&&!!s[a],children:e.jsx(r.Control,{type:"text",className:"ms-2 form-control",placeholder:`Isi pilihan ${k} Anda`,value:X[a]||"",onChange:l=>Y(a,l.target.value,n),"aria-label":`Input kustom untuk ${k}`,isInvalid:t[a]&&!!s[a],"aria-invalid":t[a]&&s[a]?"true":"false","aria-describedby":t[a]&&s[a]?`validation-feedback-${a}-custom`:void 0})})]}),c[a]==="Lainnya..."&&e.jsx(r.Control.Feedback,{type:"invalid",id:`validation-feedback-${a}-custom`,children:s[a]})]})})})]},a)};return e.jsx(R,{className:"flex-grow-1 h-100",children:e.jsxs(R.Body,{className:"d-flex flex-column",children:[e.jsx("h2",{className:"h5 pb-3 mb-3 border-bottom",children:"3. Komponen Kerangka Kerja:"}),d?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"h5",children:J}),e.jsx("p",{className:"small",children:d.framework.description}),e.jsxs("div",{className:"flex-grow-1 overflow-auto pe-2",children:[e.jsxs(r,{children:[d.framework.components?d.framework.components.map(o=>f(o.name,o)):(w=d.framework.komponen_prompt)!=null&&w.VARIABEL_INPUT?Object.entries(d.framework.komponen_prompt.VARIABEL_INPUT).map(([o,n])=>f(o,n)):null,_.length>0&&e.jsx("div",{className:"p-2 mb-3 rounded",style:{backgroundColor:"rgba(0, 255, 255, 0.1)"},children:e.jsx("p",{className:"small mb-0",children:"Bagian ini muncul berdasarkan pilihan Anda di atas. Ini adalah bidang dinamis yang menyesuaikan dengan kebutuhan spesifik Anda."})}),_.map(o=>f(o.name,o))]}),d.examples&&d.examples.length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-top",children:[e.jsx("h4",{className:"h6 mb-3",children:"Contoh Few-Shot:"}),d.examples.map((o,n)=>e.jsxs("div",{className:"mb-3 p-3 border rounded",style:{backgroundColor:"var(--background-color)"},children:[e.jsx("p",{className:"small mb-1",children:e.jsx("strong",{children:"Input Contoh:"})}),e.jsx("pre",{className:"small text-muted",style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:o.input}),e.jsx("p",{className:"small mb-1",children:e.jsx("strong",{children:"Output Contoh:"})}),e.jsx("pre",{className:"small text-muted",style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:o.output})]},n))]})]})]}):e.jsxs("div",{className:"flex-grow-1 d-flex flex-column justify-content-center align-items-center placeholder-content",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"currentColor",className:"bi bi-card-list mb-3 text-muted",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"}),e.jsx("path",{d:"M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"})]}),e.jsx("h5",{className:"text-muted",children:"Pilih Kerangka Kerja"}),e.jsx("p",{className:"text-muted small text-center",children:"Silakan pilih kategori dan kerangka kerja dari panel di sebelah kiri untuk melihat komponennya di sini."})]})]})})};export{ya as default};
