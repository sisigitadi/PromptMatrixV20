import{r as o,j as e}from"./vendor-B_SIyGk7.js";import{M as n,B as t,F as j,L as c,I as F,c as G}from"./bootstrap-vendor-CLc2Wq_s.js";const A=({show:k,onHide:f,savedPrompts:m,onLoadPrompt:g,onDeletePrompt:b,onExportPrompts:S,onImportPrompts:C,onRenamePrompt:P})=>{const[d,T]=o.useState("dateDesc"),[r,h]=o.useState(null),[u,l]=o.useState(""),[x,D]=o.useState(null),B=a=>{D(x===a?null:a)},I=a=>{h(a),l(a.frameworkName)},v=()=>{r&&u.trim()!==""&&(P(r.id,u.trim()),h(null),l(""))},R=()=>{h(null),l("")},E=()=>{const a=document.createElement("input");a.type="file",a.accept=".json",a.onchange=s=>{var y;const i=(y=s.target.files)==null?void 0:y[0];if(i){const N=new FileReader;N.onload=V=>{var w;try{const p=JSON.parse((w=V.target)==null?void 0:w.result);C(p)}catch(p){console.error("Error parsing imported file:",p),alert("Gagal mengimpor prompt. Pastikan file adalah JSON yang valid.")}},N.readAsText(i)}},a.click()},z=[...m].sort((a,s)=>d==="nameAsc"?a.frameworkName.localeCompare(s.frameworkName):d==="dateDesc"?new Date(s.timestamp).getTime()-new Date(a.timestamp).getTime():0);return e.jsxs(n,{show:k,onHide:f,centered:!0,dialogClassName:"modal-themed",children:[e.jsx(n.Header,{closeButton:!0,className:"modal-header-themed",children:e.jsx(n.Title,{children:"üìö Prompt Tersimpan & Riwayat"})}),e.jsxs(n.Body,{className:"modal-body-themed text-start",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsxs("div",{className:"d-flex",children:[e.jsx(t,{variant:"success",className:"me-2",onClick:()=>S(m),"aria-label":"Ekspor Semua Prompt Tersimpan ‚¨áÔ∏è",children:"‚¨áÔ∏è Ekspor"}),e.jsx(t,{variant:"info",onClick:E,"aria-label":"Impor Prompt dari File ‚¨ÜÔ∏è",children:"‚¨ÜÔ∏è Impor"})]}),e.jsx(j.Group,{controlId:"sortBySelect",className:"mb-0 ms-3",children:e.jsxs(j.Select,{size:"sm",value:d,onChange:a=>T(a.target.value),className:"form-select-themed",children:[e.jsx("option",{value:"dateDesc",children:"Urutkan: Terbaru"}),e.jsx("option",{value:"nameAsc",children:"Urutkan: Nama (A-Z)"})]})})]}),m.length===0?e.jsx("p",{className:"text-center",children:"Belum ada prompt yang disimpan."}):e.jsx(c,{className:"saved-prompts-list",children:z.map(a=>e.jsxs(c.Item,{className:"list-group-item-themed",children:[(r==null?void 0:r.id)===a.id?e.jsxs(F,{className:"flex-grow-1",children:[e.jsx(j.Control,{type:"text",value:u,onChange:s=>l(s.target.value),onKeyPress:s=>s.key==="Enter"&&v(),autoFocus:!0}),e.jsx(t,{variant:"success",onClick:v,children:"Simpan"}),e.jsx(t,{variant:"secondary",onClick:R,children:"Batal"})]}):e.jsx("div",{className:"d-flex justify-content-between w-100",children:e.jsxs("div",{className:"flex-grow-1 me-2",style:{whiteSpace:"normal",overflowWrap:"break-word"},children:[e.jsx("strong",{style:{fontSize:"1em",marginBottom:"0.1em",display:"block"},children:a.frameworkName}),e.jsxs("small",{style:{fontSize:"0.75em",display:"block"},children:[new Date(a.versions[a.versions.length-1].timestamp).toLocaleDateString()," ",new Date(a.versions[a.versions.length-1].timestamp).toLocaleTimeString()]}),e.jsxs("div",{className:"prompt-actions d-flex flex-wrap gap-1 mt-2",children:[e.jsx(t,{variant:"info",size:"sm",onClick:()=>B(a.id),title:"Lihat Riwayat Versi","aria-label":"Lihat Riwayat Versi",children:x===a.id?"‚¨ÜÔ∏è Sembunyikan":"‚¨áÔ∏è Riwayat"}),e.jsx(t,{variant:"primary",size:"sm",onClick:()=>g(a.versions[a.versions.length-1]),title:"Muat Versi Terbaru","aria-label":"Muat Versi Terbaru",children:"‚ñ∂Ô∏è"}),e.jsx(t,{variant:"warning",size:"sm",onClick:()=>I(a),title:"Ganti Nama","aria-label":"Ganti Nama Prompt",children:"‚úèÔ∏è"}),e.jsx(t,{variant:"danger",size:"sm",onClick:()=>b(a.id),title:"Hapus Prompt","aria-label":"Hapus Prompt",children:"üóëÔ∏è"})]})]})}),e.jsx(G,{in:x===a.id,children:e.jsxs("div",{className:"mt-3 pt-2 border-top",children:[e.jsx("h6",{children:"Riwayat Versi:"}),e.jsx(c,{variant:"flush",children:a.versions.map((s,i)=>e.jsxs(c.Item,{className:"d-flex justify-content-between align-items-center small list-group-item-themed",children:[e.jsxs("span",{children:["Versi ",i+1," -"," ",new Date(s.timestamp).toLocaleString()]}),e.jsx(t,{variant:"outline-primary",size:"sm",onClick:()=>g(s),title:"Muat Versi Ini","aria-label":`Muat Versi ${i+1}`,children:"‚ñ∂Ô∏è"})]},i))})]})})]},a.id))})]}),e.jsx(n.Footer,{className:"modal-footer-themed",children:e.jsx(t,{variant:"secondary",onClick:f,children:"Tutup"})})]})};export{A as default};
