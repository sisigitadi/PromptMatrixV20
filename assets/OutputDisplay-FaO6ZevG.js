import{r as l,j as e,a5 as le,a6 as re,a7 as ne,a8 as oe,a9 as ie,aa as de,ab as ce,ac as me}from"./vendor-B_SIyGk7.js";import{c as pe}from"./api-BsIbgxsF.js";import{M as r,F as s,I as ue,B as t,S as O,b as C,d as xe}from"./bootstrap-vendor-CLc2Wq_s.js";import"./gemini-vendor-BpRkNtKl.js";const he=({show:x,onHide:c,selectedModel:h,onModelSelect:v,apiKey:y,setApiKey:d,isApiKeyEnabled:m,formData:a,handleInputChangeWithValidation:o,validationErrors:n})=>{const[p,j]=l.useState(!1);return e.jsxs(r,{show:x,onHide:c,centered:!0,dialogClassName:"modal-themed",children:[e.jsx(r.Header,{closeButton:!0,className:"modal-header-themed",children:e.jsx(r.Title,{children:"Pengaturan Mode Pengembang"})}),e.jsxs(r.Body,{className:"modal-body-themed",children:[e.jsxs(s.Group,{className:"mb-3",controlId:"geminiModelSelect",children:[e.jsx(s.Label,{className:"small mb-1",style:{fontSize:"clamp(0.85rem, 1.5vw, 1rem)"},children:"Pilih Model Gemini:"}),e.jsxs(s.Select,{name:"geminiModel",value:h,onChange:i=>v(i.target.value),className:"form-select",style:{padding:"clamp(0.5rem, 1vw, 0.75rem)",fontSize:"clamp(0.9rem, 1.5vw, 1rem)"},children:[e.jsx("option",{value:"gemini-2.5-pro",children:"gemini-2.5-pro"}),e.jsx("option",{value:"gemini-2.5-flash",children:"gemini-2.5-flash"})]})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"apiKeyInput",children:[e.jsx(s.Label,{className:"small mb-1",style:{fontSize:"clamp(0.85rem, 1.5vw, 1rem)"},children:"API Key Gemini:"}),e.jsxs(ue,{children:[e.jsx(s.Control,{type:p?"text":"password",placeholder:"Masukkan API Key Anda",value:y,onChange:i=>d(i.target.value),style:{padding:"clamp(0.5rem, 1vw, 0.75rem)",fontSize:"clamp(0.9rem, 1.5vw, 1rem)"}}),e.jsx(t,{variant:"outline-secondary",onClick:()=>j(i=>!i),"aria-label":p?"Sembunyikan API Key":"Tampilkan API Key",children:p?e.jsx(le,{}):e.jsx(re,{})})]})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"temperatureInput",children:[e.jsx(s.Label,{className:"small mb-1",style:{fontSize:"clamp(0.85rem, 1.5vw, 1rem)"},children:"Temperature (0-1):"}),e.jsx(s.Control,{type:"number",step:"0.1",min:"0",max:"1",placeholder:"0.7",value:a.temperature||"",onChange:i=>o("temperature",parseFloat(i.target.value),{validation:{min_value:0,max_value:1}}),isInvalid:!!n.temperature,style:{padding:"clamp(0.5rem, 1vw, 0.75rem)",fontSize:"clamp(0.9rem, 1.5vw, 1rem)"}}),n.temperature&&e.jsx(s.Control.Feedback,{type:"invalid",children:n.temperature})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"topPInput",children:[e.jsx(s.Label,{className:"small mb-1",style:{fontSize:"clamp(0.85rem, 1.5vw, 1rem)"},children:"Top P (0-1):"}),e.jsx(s.Control,{type:"number",step:"0.1",min:"0",max:"1",placeholder:"0.9",value:a.top_p||"",onChange:i=>o("top_p",parseFloat(i.target.value),{validation:{min_value:0,max_value:1}}),isInvalid:!!n.top_p,style:{padding:"clamp(0.5rem, 1vw, 0.75rem)",fontSize:"clamp(0.9rem, 1.5vw, 1rem)"}}),n.top_p&&e.jsx(s.Control.Feedback,{type:"invalid",children:n.top_p})]}),e.jsxs(s.Group,{className:"mb-3",controlId:"topKInput",children:[e.jsx(s.Label,{className:"small mb-1",style:{fontSize:"clamp(0.85rem, 1.5vw, 1rem)"},children:"Top K (>=1):"}),e.jsx(s.Control,{type:"number",min:"1",placeholder:"40",value:a.top_k||"",onChange:i=>o("top_k",parseInt(i.target.value),{validation:{min_value:1}}),isInvalid:!!n.top_k,style:{padding:"clamp(0.5rem, 1vw, 0.75rem)",fontSize:"clamp(0.9rem, 1.5vw, 1rem)"}}),n.top_k&&e.jsx(s.Control.Feedback,{type:"invalid",children:n.top_k})]})]}),e.jsx(r.Footer,{className:"modal-footer-themed",children:e.jsx(t,{variant:"secondary",onClick:c,children:"Tutup"})})]})},je=({show:x,onHide:c,aiResponse:h,aiError:v,isGenerating:y})=>{const d=()=>{const m=h.replace(/\r\n/g,`
`).replace(/\r/g,`
`);navigator.clipboard.writeText(m)};return e.jsxs(r,{show:x,onHide:c,centered:!0,size:"lg",dialogClassName:"modal-themed",animation:!0,children:[e.jsx(r.Header,{closeButton:!0,className:"modal-header-themed",children:e.jsxs(r.Title,{children:[e.jsx(ne,{className:"me-2"})," Respons AI"]})}),e.jsx(r.Body,{className:"modal-body-themed",children:e.jsx("div",{"aria-live":"polite",children:y?e.jsxs("div",{className:"text-center my-5",children:[e.jsx(O,{animation:"border",role:"status",children:e.jsx("span",{className:"visually-hidden",children:"AI sedang berpikir..."})}),e.jsx("p",{className:"mt-2",children:"AI sedang berpikir..."})]}):v?e.jsxs("div",{className:"mt-3 p-3 border rounded text-danger",style:{backgroundColor:"rgba(220, 53, 69, 0.1)",borderColor:"var(--danger-color)"},children:[e.jsx("strong",{children:"Error:"})," ",v]}):h?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-3 border rounded ai-response-container",style:{backgroundColor:"var(--panel-card-color)",color:"var(--text-color)",maxHeight:"clamp(300px, 60vh, 800px)",overflowY:"auto"},children:e.jsx(oe,{components:{code({node:m,inline:a,className:o,children:n,...p}){const j=/language-(\w+)/.exec(o||"");return!a&&j?e.jsx(ie.Prism,{language:j[1],PreTag:"div",...p,children:String(n).replace(/\n$/,"")}):e.jsx("code",{className:o,...p,children:n})},blockquote({node:m,children:a,...o}){return e.jsx("blockquote",{style:{borderLeft:"4px solid #ccc",margin:"1.5em 10px",padding:"0.5em 10px",color:"#666"},...o,children:a})},img({node:m,...a}){const o=a.src&&a.src.startsWith("data:");return e.jsxs("div",{style:{textAlign:"center",margin:"10px 0"},children:[e.jsx("img",{...a,style:{maxWidth:"100%",height:"auto"}}),!o&&a.src&&e.jsx(t,{variant:"outline-secondary",size:"sm",className:"mt-2",href:a.src,download:!0,children:"Download Image"})]})},audio({node:m,...a}){return e.jsxs("div",{style:{margin:"10px 0"},children:[e.jsx("audio",{controls:!0,...a,style:{width:"100%"},children:"Your browser does not support the audio element."}),a.src&&e.jsx(t,{variant:"outline-secondary",size:"sm",className:"mt-2",href:a.src,download:!0,children:"Download Audio"})]})},video({node:m,...a}){return e.jsxs("div",{style:{margin:"10px 0"},children:[e.jsx("video",{controls:!0,...a,style:{width:"100%"},children:"Your browser does not support the video tag."}),a.src&&e.jsx(t,{variant:"outline-secondary",size:"sm",className:"mt-2",href:a.src,download:!0,children:"Download Video"})]})}},children:h})}),e.jsx("div",{className:"d-flex justify-content-end mt-3",children:e.jsxs(t,{variant:"primary",onClick:d,children:[e.jsx(de,{className:"me-2"})," Copy Response"]})})]}):e.jsx("p",{children:"No AI response to display yet."})})}),e.jsx(r.Footer,{className:"modal-footer-themed",children:e.jsx(t,{variant:"secondary",onClick:c,children:"Tutup"})})]})},be=({naturalLanguageOutput:x,jsonOutput:c,previewNaturalLanguageOutput:h,previewJsonOutput:v,currentFrameworkDetails:y,formData:d,customInputs:m,selectedFramework:a,selectedCategory:o,onUseAsInput:n,onShowSavedPrompts:p,showDevMode:j,onSavePrompt:i,apiKey:I,setApiKey:L,selectedModel:P,onModelSelect:Y,isApiKeyEnabled:D,handleInputChangeWithValidation:q,validationErrors:$})=>{const[N,F]=l.useState("natural"),[J,_]=l.useState("Salin"),[Q,k]=l.useState(!1),[U,G]=l.useState(""),[W,T]=l.useState(null),[A,z]=l.useState(!1),[X,w]=l.useState(null),[Z,B]=l.useState(!1),[V,K]=l.useState(!1),R=!x&&!c,S=N==="natural"?R?h:x:R?v:c,[f,E]=l.useState(S),[b,H]=l.useState(!1),M=l.useRef(null);l.useEffect(()=>{E(S),H(!1)},[S]),l.useEffect(()=>{b&&M.current&&M.current.focus()},[b]);const ee=()=>{H(!b)},ae=g=>{g.stopPropagation();const u=f.replace(/\r\n/g,`
`).replace(/\r/g,`
`);navigator.clipboard.writeText(u).then(()=>{_("Tersalin!"),setTimeout(()=>_("Salin"),2e3)})},se=async()=>{console.log("handleGenerateClick - API Key Check:",{apiKey:I,isApiKeyEnabled:D,selectedModel:P}),z(!0),T(null),w(null),K(!0);const g={temperature:d.temperature?parseFloat(d.temperature):void 0,topP:d.top_p?parseFloat(d.top_p):void 0,topK:d.top_k?parseInt(d.top_k):void 0};try{const u=await pe(I,f,P,g);u.error?(w(u.error),T(null)):(T(u),w(null))}catch(u){u instanceof Error?w(u.message):w("An unknown error occurred.")}finally{z(!1)}},te=()=>{if(!y||!a||!o){G("Tidak dapat menyimpan prompt: Detail framework atau kategori tidak lengkap."),k(!0);return}const g={id:Date.now(),timestamp:new Date().toISOString(),category:o,frameworkName:a,frameworkDetails:y,formData:d,customInputs:m,naturalLanguageOutput:x,jsonOutput:c};i(g),G("Prompt berhasil disimpan!"),k(!0)};return e.jsxs(e.Fragment,{children:[e.jsxs(C,{className:"flex-grow-1 h-100",children:[e.jsxs(C.Header,{className:"d-flex justify-content-between align-items-center",children:["4. Pratinjau Prompt:",e.jsxs(xe,{"aria-label":"Output Type",children:[e.jsx(t,{variant:N==="natural"?"primary":"outline-primary",onClick:()=>F("natural"),children:"ðŸ“ Natural"}),e.jsx(t,{variant:N==="json"?"primary":"outline-primary",onClick:()=>F("json"),children:"ðŸ“„ JSON"})]})]}),e.jsxs(C.Body,{className:"d-flex flex-column",children:[e.jsxs("div",{style:{flexGrow:1,display:"flex",flexDirection:"column"},children:[e.jsx(s.Control,{as:"textarea",ref:M,value:f,onChange:g=>E(g.target.value),rows:Math.max(10,(f||"").split(`
`).length+1),className:`flex-grow-1 mb-3 output-textarea ${b?"editable":""}`,placeholder:"Prompt Anda yang terstruktur lengkap akan disusun dan ditampilkan di sini...","aria-label":"Output Prompt",readOnly:!b,style:{padding:"clamp(1rem, 2vw, 1.5rem)",fontSize:"clamp(0.85rem, 1.2vw, 1rem)",maxHeight:"60vh",overflowY:"auto",whiteSpace:"pre-wrap",wordBreak:"break-word"}}),N==="natural"&&e.jsxs("div",{className:"d-flex justify-content-end small mb-2",children:[e.jsxs("span",{children:["Karakter: ",f.length]}),e.jsxs("span",{className:"ms-3",children:["Kata:"," ",f.trim().split(/\s+/).filter(Boolean).length]})]}),e.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[e.jsxs(t,{variant:"success",onClick:ae,className:"flex-grow-1 me-2",children:["ðŸ“‹ ",J]}),e.jsx(t,{variant:"info",onClick:ee,className:"flex-grow-1 me-2",children:b?"Selesai Edit":"âœï¸ Edit"}),e.jsx(t,{variant:"warning",onClick:()=>n(S),className:"flex-grow-1 me-2",children:"âž¡ï¸ Output â†’ Input"})]}),j&&e.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[e.jsx(t,{variant:"info",onClick:se,className:"flex-grow-1 me-2",disabled:A,children:A?e.jsxs(e.Fragment,{children:[e.jsx(O,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true"})," ","Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ce,{})," Generate AI Response"]})}),e.jsx(t,{variant:"outline-info",onClick:()=>B(!0),className:"flex-grow-0",title:"Pengaturan Mode Pengembang","aria-label":"Pengaturan Mode Pengembang",children:e.jsx(me,{})})]})]}),e.jsxs("div",{style:{flexGrow:1,display:"flex",flexDirection:"column",paddingTop:"1rem",borderTop:"1px solid var(--border-color)"},children:[e.jsx(C.Title,{className:"mb-3",children:"5. Simpan Prompt:"}),e.jsxs("div",{className:"d-flex justify-content-between",children:[e.jsx(t,{variant:"primary",onClick:te,className:"flex-grow-1 me-2",children:"ðŸ’¾ Simpan Prompt"}),e.jsx(t,{variant:"info",onClick:p,className:"flex-grow-1",children:"ðŸ“š Prompt Tersimpan"})]})]})]})]}),e.jsxs(r,{show:Q,onHide:()=>k(!1),centered:!0,dialogClassName:"modal-themed",children:[e.jsx(r.Header,{closeButton:!0,className:"modal-header-themed",children:e.jsx(r.Title,{children:"Notifikasi Penyimpanan"})}),e.jsx(r.Body,{className:"modal-body-themed",children:e.jsx("p",{children:U})}),e.jsx(r.Footer,{className:"modal-footer-themed",children:e.jsx(t,{variant:"secondary",onClick:()=>k(!1),children:"Tutup"})})]}),j&&e.jsx(he,{show:Z,onHide:()=>B(!1),selectedModel:P,onModelSelect:Y,apiKey:I,setApiKey:L,formData:d,handleInputChangeWithValidation:q,validationErrors:$}),e.jsx(je,{show:V,onHide:()=>K(!1),aiResponse:W,aiError:X,isGenerating:A})]})};export{be as default};
