import{r as u,j as a,U as M}from"./vendor-B_SIyGk7.js";import{P as N}from"./index-DdDzsSWE.js";import{c as O}from"./categoryUtils-Cv2bnA6l.js";import{M as h,I as R,F as T,B as C,L as o,A as p}from"./bootstrap-vendor-CLc2Wq_s.js";import"./toastify-vendor-CNnuZH5_.js";const D=({show:S,onHide:j,outputToChain:F,onSelectInput:A})=>{var k,I;const[l,B]=u.useState(null),[n,v]=u.useState(null),[m,g]=u.useState(""),y=e=>{B(e),v(null)},x=e=>{v(e)},E=()=>{l&&n&&(A(l,n,F),j())},b=u.useMemo(()=>{const e=[];return Object.entries(N).forEach(([t,r])=>{Object.entries(r).forEach(([i,s])=>{Object.entries(s).forEach(([c,L])=>{e.push({name:c,description:L.description,category:t,subcategory:i,details:L})})})}),e},[]),P=u.useMemo(()=>{const e=m.toLowerCase();return e?b.filter(t=>{var r,i;return t.name.toLowerCase().includes(e)||t.description.toLowerCase().includes(e)||t.category.toLowerCase().includes(e)||t.subcategory.toLowerCase().includes(e)||((r=t.details.components)==null?void 0:r.some(s=>s.name.toLowerCase().includes(e)||s.label.toLowerCase().includes(e)))||((i=t.details.komponen_prompt)==null?void 0:i["VARIABEL INPUT"])&&Object.values(t.details.komponen_prompt["VARIABEL INPUT"]).some(s=>s.name.toLowerCase().includes(e)||s.label.toLowerCase().includes(e))||t.details.dynamicSubcomponents&&Object.values(t.details.dynamicSubcomponents.options).some(s=>s.some(c=>c.name.toLowerCase().includes(e)||c.label.toLowerCase().includes(e)))}):[]},[m,b]),d=l?(e=>{var t;return(t=b.find(r=>r.name===e))==null?void 0:t.details})(l):void 0;return a.jsxs(h,{show:S,onHide:j,size:"xl",centered:!0,dialogClassName:"modal-themed",children:[a.jsx(h.Header,{closeButton:!0,className:"modal-header-themed",children:a.jsx(h.Title,{children:"Gunakan Output sebagai Input"})}),a.jsxs(h.Body,{className:"modal-body-themed text-start",children:[a.jsxs(R,{className:"mb-3",children:[a.jsx(T.Control,{type:"text",placeholder:"Cari kerangka kerja...",value:m,onChange:e=>g(e.target.value),"aria-label":"Cari kerangka kerja target"}),m&&a.jsx(C,{variant:"outline-secondary",onClick:()=>g(""),title:"Hapus Pencarian",children:a.jsx(M,{})})]}),a.jsxs("div",{className:"d-flex",style:{height:"60vh"},children:[a.jsxs("div",{className:"flex-grow-1 overflow-auto pe-3",children:[a.jsx("h5",{children:"Pilih Kerangka Kerja Target:"}),m.length>0?a.jsx(o,{children:P.map(e=>a.jsxs(o.Item,{action:!0,active:l===e.name,onClick:()=>y(e.name),className:"ms-3 list-group-item-themed",role:"button","aria-current":l===e.name?"true":void 0,children:[a.jsx("strong",{children:e.name}),a.jsx("br",{}),a.jsxs("small",{children:[e.category," > ",e.subcategory]})]},e.name))}):a.jsx(p,{alwaysOpen:!0,children:Object.entries(N).sort((e,t)=>e[0].localeCompare(t[0])).map(([e,t])=>a.jsxs(p.Item,{eventKey:e,children:[a.jsx(p.Header,{className:`accordion-header-themed category-button-dynamic ${O[e]}`,children:e}),a.jsx(p.Body,{className:"p-0",children:a.jsx(o,{variant:"flush",children:Object.entries(t).sort((r,i)=>r[0].localeCompare(i[0])).map(([r,i])=>a.jsxs("div",{children:[a.jsx(o.Item,{className:`subcategory-header list-group-item-themed category-button-dynamic ${O[e]}`,children:r}),Object.entries(i).sort((s,c)=>s[0].localeCompare(c[0])).map(([s,c])=>a.jsx(o.Item,{action:!0,active:l===s,onClick:()=>y(s),className:"ms-3 list-group-item-themed",role:"button","aria-current":l===s?"true":void 0,children:s},s))]},r))})})]},e))})]}),l&&d&&a.jsxs("div",{className:"flex-grow-1 overflow-auto ps-3",children:[a.jsxs("h5",{children:["Pilih Input untuk ",l,":"]}),a.jsxs(o,{children:[(k=d.components)==null?void 0:k.sort((e,t)=>e.label.localeCompare(t.label)).map(e=>a.jsxs(o.Item,{action:!0,active:n===e.name,onClick:()=>x(e.name),className:"list-group-item-themed",role:"button","aria-current":n===e.name?"true":void 0,children:[e.label," (",e.type,")"]},e.name)),((I=d.komponen_prompt)==null?void 0:I["VARIABEL INPUT"])&&Object.entries(d.komponen_prompt["VARIABEL INPUT"]).sort(([,e],[,t])=>e.label.localeCompare(t.label)).map(([e,t])=>a.jsxs(o.Item,{action:!0,active:n===e,onClick:()=>x(e),className:"list-group-item-themed",role:"button","aria-current":n===e?"true":void 0,children:[t.label||e," (",t.type,")"]},e)),d.dynamicSubcomponents&&Object.values(d.dynamicSubcomponents.options).flatMap(e=>e.sort((t,r)=>t.label.localeCompare(r.label)).map(t=>a.jsxs(o.Item,{action:!0,active:n===t.name,onClick:()=>x(t.name),className:"list-group-item-themed",role:"button","aria-current":n===t.name?"true":void 0,children:[t.label," (",t.type,") (Dynamic)"]},t.name)))]})]})]})]}),a.jsxs(h.Footer,{className:"modal-footer-themed",children:[a.jsx(C,{variant:"secondary",onClick:j,children:"Batal"}),a.jsx(C,{variant:"primary",onClick:E,disabled:!l||!n,children:"Konfirmasi"})]})]})};export{D as default};
