import{r as O,j as e,S as na,U as G,V as H,W as la,X as ia,Y as ta,Z as oa,_ as ca,$ as ra,a0 as da,a1 as ma,a2 as pa,a3 as ha,a4 as xa}from"./vendor-CYeAWIBZ.js";import{c as ka}from"./api-BsIbgxsF.js";import{b as U,F as d,O as k,T as g,I,B as b,S as R}from"./bootstrap-vendor-CPt9RqHs.js";import"./gemini-vendor-BpRkNtKl.js";const ya=({currentFrameworkDetails:c,selectedFramework:J,formData:r,customInputs:X,dynamicComponentsToRender:C,onModelSelect:ga,selectedModel:P,showDevMode:S,apiKey:N,setApiKey:ja,handleInputChangeWithValidation:x,handleCustomInputChangeWithValidation:Y,validationErrors:s,touchedFields:o})=>{var T;const[j,K]=O.useState({}),[Z,p]=O.useState(null),q=(t,n)=>{console.log(`Toast (${n}): ${t}`),alert(t)},Q=!0,v=(t,n)=>{const a=t,h=n.label||n.description||t,u=n.type,y=n.placeholder,A=n.options,M=n.info,V=n.optional,_=async(i,f,$)=>{var L,w,z;if(console.log("handleAiAssist - API Key Check:",{apiKey:N,isApiKeyEnabled:Q,selectedModel:P}),!N){alert("API Key tidak ditemukan. Harap masukkan API Key di Pengaturan Mode Pengembang.");return}K(m=>({...m,[i]:!0}));const l=c==null?void 0:c.framework,E=(l==null?void 0:l.logika_ai)||"",F=(l==null?void 0:l.perspektif_user)||"",D=((L=l==null?void 0:l.komponen_prompt)==null?void 0:L.PERAN)||"",aa=((w=l==null?void 0:l.komponen_prompt)==null?void 0:w.KONTEKS)||"",ea=((z=l==null?void 0:l.komponen_prompt)==null?void 0:z.TUGAS)||"",sa=`Anda adalah asisten prompt engineering. Tugas Anda adalah membantu pengguna mengisi atau menyempurnakan bagian dari prompt mereka.

Kerangka Kerja Saat Ini:
Nama: ${(l==null?void 0:l.nama_kerangka)||"N/A"}
Deskripsi: ${(l==null?void 0:l.description)||"N/A"}

Komponen yang sedang diisi:
Judul Komponen: "${h}"
Deskripsi Variabel: "${$.description}"
Contoh/Placeholder: "${y||"N/A"}"

Ini adalah bagian dari kerangka kerja prompt dengan:
PERAN: ${D}
KONTEKS: ${aa}
TUGAS: ${ea}

Logika AI untuk kerangka kerja ini adalah: "${E}"
Perspektif pengguna untuk kerangka kerja ini adalah: "${F}"

Teks saat ini di bidang ini adalah: "${f}".

Instruksi:
- Fokuskan respons Anda secara strikt pada variabel "${$.description}" dan judul komponen "${h}" dalam konteks kerangka kerja ini.
- Jika teks saat ini kosong, hasilkan teks yang relevan dan sesuai dengan deskripsi variabel, judul komponen, dan konteks kerangka kerja.
- Jika teks saat ini tidak kosong, perbaiki, perluas, atau sempurnakan teks ini agar lebih baik, lebih lengkap, dan sesuai dengan deskripsi variabel, judul komponen, dan konteks kerangka kerja.
- Berikan hanya teks yang disarankan, tanpa penjelasan tambahan atau pembuka/penutup.
- Pastikan output Anda langsung dapat digunakan sebagai nilai untuk bidang input ini.
`;try{const m=await ka(N,sa,P);x(i,m,$)}catch(m){console.error("AI Assist Error:",m),q(`Gagal mendapatkan bantuan AI untuk ${h}. Error: ${m instanceof Error?m.message:String(m)}`,"error")}finally{K(m=>({...m,[i]:!1}))}},B=(i,f)=>{x(i,"",f)};if(!a)return null;const W=i=>{switch(i){case"text":case"textarea":return e.jsx(xa,{className:"me-2"});case"number":return e.jsx(ha,{className:"me-2"});case"date":case"datetime":return e.jsx(pa,{className:"me-2"});case"color":return e.jsx(ma,{className:"me-2"});case"select":case"multiselect":return e.jsx(da,{className:"me-2"});case"boolean":return e.jsx(ra,{className:"me-2"});case"code":return e.jsx(ca,{className:"me-2"});case"slider":return e.jsx(oa,{className:"me-2"});case"negative_prompt":return e.jsx(ta,{className:"me-2"});case"image":return e.jsx(ia,{className:"me-2"});case"file":return e.jsx(la,{className:"me-2"});default:return null}};return e.jsxs(d.Group,{className:"mb-3",controlId:a,children:[e.jsxs(d.Label,{className:"small mb-1 d-flex align-items-center",children:[W(u),h,M&&e.jsx(k,{placement:"top",overlay:e.jsx(g,{id:`tooltip-${a}`,children:M}),children:e.jsx(na,{className:"ms-2",style:{cursor:"help"}})}),V&&e.jsx(k,{placement:"top",overlay:e.jsx(g,{id:`tooltip-optional-${a}`,children:"Bidang ini bersifat opsional dan dapat dibiarkan kosong."}),children:e.jsx("span",{className:"ms-1",style:{cursor:"help"},children:"(Opsional)"})})]}),u==="textarea"&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs(I,{className:"flex-grow-1",children:[e.jsx(k,{placement:"right",overlay:e.jsx(g,{id:`tooltip-error-${a}`,children:s[a]}),show:o[a]&&!!s[a],children:e.jsx(d.Control,{as:"textarea",name:a,placeholder:y,value:r[a]||"",onChange:i=>x(a,i.target.value,n),onMouseEnter:()=>p(a),onMouseLeave:()=>p(null),rows:Math.max(3,(r[a]||"").split(`
`).length+1),isInvalid:o[a]&&!!s[a],"aria-invalid":o[a]&&s[a]?"true":"false","aria-describedby":o[a]&&s[a]?`validation-feedback-${a}`:void 0})}),r[a]&&e.jsx(b,{variant:"outline-secondary",onClick:()=>B(a,n),title:"Hapus Input",children:e.jsx(G,{})}),e.jsx(d.Control.Feedback,{type:"invalid",id:`validation-feedback-${a}`,children:s[a]})]}),S&&e.jsx(b,{variant:"outline-secondary",onClick:()=>_(a,r[a]||"",n),disabled:j[a],title:"AI Assist",className:"ms-2",children:j[a]?e.jsx(R,{as:"span",animation:"border",size:"sm"}):e.jsx(H,{})})]}),u==="negative_prompt"&&e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsxs(I,{className:"flex-grow-1",children:[e.jsx(d.Control,{as:"textarea",name:a,placeholder:y||"Masukkan hal-hal yang ingin dihindari...",value:r[a]||"",onChange:i=>x(a,i.target.value,n),onMouseEnter:()=>p(a),onMouseLeave:()=>p(null),rows:Math.max(2,(r[a]||"").split(`
`).length+1),isInvalid:o[a]&&!!s[a],"aria-invalid":o[a]&&s[a]?"true":"false","aria-describedby":o[a]&&s[a]?`validation-feedback-${a}`:void 0}),r[a]&&e.jsx(b,{variant:"outline-secondary",onClick:()=>B(a,n),title:"Hapus Input",children:e.jsx(G,{})}),e.jsx(d.Control.Feedback,{type:"invalid",id:`validation-feedback-${a}`,children:s[a]})]}),S&&e.jsx(b,{variant:"outline-secondary",onClick:()=>_(a,r[a]||"",n),disabled:j[a],title:"AI Assist",className:"ms-2",children:j[a]?e.jsx(R,{as:"span",animation:"border",size:"sm"}):e.jsx(H,{})})]}),u==="select"&&e.jsx("div",{className:"w-100",children:e.jsx(k,{placement:"right",overlay:e.jsx(g,{id:`tooltip-error-${a}`,children:s[a]}),show:o[a]&&!!s[a]||Z===a&&!!s[a],children:e.jsxs(e.Fragment,{children:[e.jsxs(I,{children:[e.jsx(d.Select,{name:a,value:r[a]||"",onChange:i=>x(a,i.target.value,n),onMouseEnter:()=>p(a),onMouseLeave:()=>p(null),className:"form-select",isInvalid:o[a]&&!!s[a],"aria-invalid":o[a]&&s[a]?"true":"false","aria-describedby":o[a]&&s[a]?`validation-feedback-${a}`:void 0,children:A==null?void 0:A.map(i=>e.jsx("option",{value:i,children:i},i))}),e.jsx(d.Control.Feedback,{type:"invalid",id:`validation-feedback-${a}`,children:s[a]}),r[a]==="Lainnya..."&&e.jsx(k,{placement:"right",overlay:e.jsx(g,{id:`tooltip-error-${a}-custom`,children:s[a]}),show:o[a]&&!!s[a],children:e.jsx(d.Control,{type:"text",className:"ms-2 form-control",placeholder:`Isi pilihan ${h} Anda`,value:X[a]||"",onChange:i=>Y(a,i.target.value,n),"aria-label":`Input kustom untuk ${h}`,isInvalid:o[a]&&!!s[a],"aria-invalid":o[a]&&s[a]?"true":"false","aria-describedby":o[a]&&s[a]?`validation-feedback-${a}-custom`:void 0})})]}),r[a]==="Lainnya..."&&e.jsx(d.Control.Feedback,{type:"invalid",id:`validation-feedback-${a}-custom`,children:s[a]})]})})})]},a)};return e.jsx(U,{className:"flex-grow-1 h-100",children:e.jsxs(U.Body,{className:"d-flex flex-column",children:[e.jsx("h2",{className:"h5 pb-3 mb-3 border-bottom",children:"3. Komponen Kerangka Kerja:"}),c?e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"h5",children:J}),e.jsx("p",{className:"small",children:c.framework.description}),e.jsxs("div",{className:"flex-grow-1 overflow-auto pe-2",children:[e.jsxs(d,{children:[c.framework.components?c.framework.components.map(t=>v(t.name,t)):(T=c.framework.komponen_prompt)!=null&&T.VARIABEL_INPUT?Object.entries(c.framework.komponen_prompt.VARIABEL_INPUT).map(([t,n])=>v(t,n)):null,C.length>0&&e.jsx("div",{className:"p-2 mb-3 rounded",style:{backgroundColor:"rgba(0, 255, 255, 0.1)"},children:e.jsx("p",{className:"small mb-0",children:"Bagian ini muncul berdasarkan pilihan Anda di atas. Ini adalah bidang dinamis yang menyesuaikan dengan kebutuhan spesifik Anda."})}),C.map(t=>v(t.name,t))]}),c.examples&&c.examples.length>0&&e.jsxs("div",{className:"mt-4 pt-3 border-top",children:[e.jsx("h4",{className:"h6 mb-3",children:"Contoh Few-Shot:"}),c.examples.map((t,n)=>e.jsxs("div",{className:"mb-3 p-3 border rounded",style:{backgroundColor:"var(--background-color)"},children:[e.jsx("p",{className:"small mb-1",children:e.jsx("strong",{children:"Input Contoh:"})}),e.jsx("pre",{className:"small text-muted",style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:t.input}),e.jsx("p",{className:"small mb-1",children:e.jsx("strong",{children:"Output Contoh:"})}),e.jsx("pre",{className:"small text-muted",style:{whiteSpace:"pre-wrap",wordBreak:"break-word"},children:t.output})]},n))]})]})]}):e.jsxs("div",{className:"flex-grow-1 d-flex flex-column justify-content-center align-items-center placeholder-content",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"64",height:"64",fill:"currentColor",className:"bi bi-card-list mb-3 text-muted",viewBox:"0 0 16 16",children:[e.jsx("path",{d:"M14.5 3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-13a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h13zm-13-1A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h13a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 14.5 2h-13z"}),e.jsx("path",{d:"M5 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 5 8zm0-2.5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm0 5a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7a.5.5 0 0 1-.5-.5zm-1-5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zM4 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0zm0 2.5a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0z"})]}),e.jsx("h5",{className:"text-muted",children:"Pilih Kerangka Kerja"}),e.jsx("p",{className:"text-muted small text-center",children:"Silakan pilih kategori dan kerangka kerja dari panel di sebelah kiri untuk melihat komponennya di sini."})]})]})})};export{ya as default};
